Description: >
    Reem Mohamed Amr /Servers - Devops Nanodegree

Parameters:
    EnvironmentName:
        Description: An environment name
        Type: String

Resources: 
    LBSecGroup:
        Type: AWS::EC2::SecurityGroup
        Properties: 
          GroupDescription: Allow http to the load balancer
          SecurityGroupEgress: 
          - IpProtocol: tcp
            FromPort: 80
            ToPort: 80
            CidrIp: 0.0.0.0/0
          - IpProtocol: tcp
            FromPort: 22
            ToPort: 22
            CidrIp: 0.0.0.0/0
          SecurityGroupIngress:
          - IpProtocol: tcp
            FromPort: 0
            ToPort: 65535
            CidrIp: 0.0.0.0/0
          VpcId: 
            Fn::ImportValue:
              !Sub "${EnvironmentName}-VPCID"
    WebServerSecGroup:
        Type: AWS::EC2::SecurityGroup
        Properties:
          GroupDescription: Allow http to our hosts and SSH from local only
          SecurityGroupIngress:
          - IpProtocol: tcp
            FromPort: 8080
            ToPort: 8080
            CidrIp: 0.0.0.0/0
          - IpProtocol: tcp
            FromPort: 22
            ToPort: 22
            CidrIp: 0.0.0.0/0
          SecurityGroupEgress:
          - IpProtocol: tcp
            FromPort: 0
            ToPort: 65535
            CidrIp: 0.0.0.0/0
          VpcId:
            Fn::ImportValue:
              !Sub "${EnvironmentName}-VPCID"